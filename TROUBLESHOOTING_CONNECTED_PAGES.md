# ๐ง ุฏููู ุงุณุชูุดุงู ุฃุฎุทุงุก ุงูุตูุญุงุช ุงููุฑุจูุทุฉ

## ๐จ ุงููุดููุฉ ุงูุญุงููุฉ
**ุงูุตูุญุงุช ูุง ุชุธูุฑ ูู ูุงุฆูุฉ "ุงูุตูุญุงุช ุงููุฑุจูุทุฉ" ุจุนุฏ ุฑุจุทูุง ูู ุงูุฅุนุฏุงุฏุงุช**

---

## ๐ ุฎุทูุงุช ุงูุชุดุฎูุต

### 1. **ุชุญูู ูู ุญุงูุฉ ุฎุงุฏู API**
```bash
# ุชุดุบูู ุฎุงุฏู API
npm run api

# ุฃู ุชุดุบูู ุงูุฎุงุฏู ูุงููุงุฌูุฉ ูุนุงู
npm run start:all
```

**ุงููุดููุฉ ุงููุญุชููุฉ:** ุฎุงุฏู API ูุง ูุนูู ุนูู ุงููููุฐ 8081

### 2. **ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
ุงูุชุญ ุงููุชุตูุญ ูุงุฐูุจ ุฅูู:
```
http://localhost:8081/api/facebook/settings
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ูุงุฆูุฉ JSON ุจุงูุตูุญุงุช ุงููุฑุจูุทุฉ
**ุฅุฐุง ุธูุฑ ุฎุทุฃ:** ุฎุงุฏู API ูุง ูุนูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ูุชุตูุฉ

### 3. **ุชุญูู ูู ุนูููุฉ ุงูุฑุจุท**
ุงูุชุญ Developer Tools ูู ุงููุชุตูุญ (F12) ูุชุงุจุน:
1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช `/settings`
2. ุฃุฏุฎู Access Token
3. ุงุฎุชุฑ ุตูุญุฉ ููุฑุจุท
4. ุฑุงูุจ Console ููุฑุณุงุฆู

**ุงูุฑุณุงุฆู ุงููุชููุนุฉ:**
```
๐ ุจุฏุก ุฑุจุท ุงูุตูุญุฉ: {pageId, pageName}
๐พ ุจุฏุก ุญูุธ ุฅุนุฏุงุฏุงุช Facebook
โ ุชู ุญูุธ ุงูุตูุญุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ
```

---

## ๐๏ธ ุงูุญููู ุงูููุชุฑุญุฉ

### ุงูุญู 1: ุชุดุบูู ุฎุงุฏู API
```bash
# ูู terminal ูููุตู
cd C:\Users\mo1\Desktop\facebook-reply2.1
npm run api
```

### ุงูุญู 2: ุชุดุบูู ุงููุธุงู ูุงููุงู
```bash
# ุชุดุบูู ุงููุงุฌูุฉ ูุงูุฎุงุฏู ูุนุงู
npm run start:all
```

### ุงูุญู 3: ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฏููุงู
1. ุงูุชุญ Supabase Dashboard
2. ุงุฐูุจ ุฅูู Table Editor
3. ุงูุชุญ ุฌุฏูู `facebook_settings`
4. ุชุญูู ูู ูุฌูุฏ ุงูุตูุญุงุช ุงููุฑุจูุทุฉ

### ุงูุญู 4: ุฅุนุงุฏุฉ ุฑุจุท ุงูุตูุญุงุช
1. ุงุฐูุจ ุฅูู `/settings`
2. ุฃุฏุฎู Access Token ูุฑุฉ ุฃุฎุฑู
3. ุงุฎุชุฑ ุงูุตูุญุฉ ูุฃุนุฏ ุฑุจุทูุง
4. ุฑุงูุจ Console ููุชุฃูุฏ ูู ูุฌุงุญ ุงูุนูููุฉ

---

## ๐ง ุฅุตูุงุญุงุช ุชูููุฉ

### ุฅุตูุงุญ 1: ุชุญุฏูุซ Hook
ูู `src/hooks/useFacebookApi.ts`:
```typescript
// ุชุฃูุฏ ูู ุฃู queryKey ุตุญูุญ
const { data: allConnectedPages = [], isLoading: isLoadingConnectedPages } = useQuery({
  queryKey: ['connected-pages'],
  queryFn: async () => {
    return await FacebookApiService.getAllConnectedPages();
  },
  refetchOnMount: true, // ุฅุถุงูุฉ ูุฐุง ุงูุณุทุฑ
  refetchOnWindowFocus: true, // ุฅุถุงูุฉ ูุฐุง ุงูุณุทุฑ
});
```

### ุฅุตูุงุญ 2: ูุฑุถ ุฅุนุงุฏุฉ ุงูุชุญููู
ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช ุจุนุฏ ุงูุฑุจุท:
```typescript
// ุฅุถุงูุฉ ูุฐุง ุจุนุฏ ูุฌุงุญ ุงูุฑุจุท
queryClient.invalidateQueries({ queryKey: ['connected-pages'] });
window.location.reload(); // ุญู ูุคูุช
```

### ุฅุตูุงุญ 3: ุชุญูู ูู ููุชุฑุฉ ุงูุดุฑูุงุช
ูู `src/hooks/useFacebookApi.ts` ุงูุณุทุฑ 35-91:
```typescript
// ุชุฃูุฏ ูู ุฃู ููุชุฑุฉ ุงูุดุฑูุงุช ุชุนูู ุจุดูู ุตุญูุญ
const connectedPages = React.useMemo(() => {
  console.log('๐ ุจุฏุก ููุชุฑุฉ ุงูุตูุญุงุช ุญุณุจ ุงูุดุฑูุฉ...');
  console.log('๐ ุฌููุน ุงูุตูุญุงุช:', allConnectedPages?.length || 0);
  
  // ุฅุฐุง ูู ุชูู ููุงู ุตูุญุงุช ุฃุตูุงูุ ุฅุฑุฌุงุน ูุตูููุฉ ูุงุฑุบุฉ
  if (!allConnectedPages || allConnectedPages.length === 0) {
    console.log('โ ูุง ุชูุฌุฏ ุตูุญุงุช ูู ุงููุธุงู');
    return [];
  }
  
  // ุจุงูู ุงูููุฏ...
}, [allConnectedPages, company?.id, company?.name]);
```

---

## ๐งช ุงุฎุชุจุงุฑ ุณุฑูุน

### ุงุฎุชุจุงุฑ 1: ุจูุงูุงุช ุชุฌุฑูุจูุฉ
ุชู ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูู ุตูุญุฉ ุงูุตูุญุงุช ุงููุฑุจูุทุฉ ูุงุฎุชุจุงุฑ ุงููุงุฌูุฉ.

### ุงุฎุชุจุงุฑ 2: API ูุจุงุดุฑ
```bash
# ุงุฎุชุจุงุฑ API ูุจุงุดุฑุฉ
curl http://localhost:8081/api/facebook/settings
```

### ุงุฎุชุจุงุฑ 3: Console Logs
ุงูุชุญ Developer Tools ูุฑุงูุจ ุงูุฑุณุงุฆู ูู Console ุนูุฏ:
- ุชุญููู ุตูุญุฉ ุงูุตูุญุงุช ุงููุฑุจูุทุฉ
- ุฑุจุท ุตูุญุฉ ุฌุฏูุฏุฉ ูู ุงูุฅุนุฏุงุฏุงุช

---

## ๐ ุฎุทูุงุช ุงููุชุงุจุนุฉ

1. **ุดุบู ุฎุงุฏู API** ุฃููุงู
2. **ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช** 
3. **ุฃุนุฏ ุฑุจุท ุตูุญุฉ** ููุงุฎุชุจุงุฑ
4. **ุฑุงูุจ Console** ููุฑุณุงุฆู
5. **ุชุญูู ูู ุตูุญุฉ ุงูุตูุญุงุช ุงููุฑุจูุทุฉ**

---

## ๐ก ููุงุญุธุงุช ูููุฉ

- **ุฎุงุฏู API ูุฌุจ ุฃู ูุนูู ุนูู ุงููููุฐ 8081**
- **Vite Dev Server ูุนูู ุนูู ุงููููุฐ 8080**
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช Supabase ูุฌุจ ุฃู ุชููู ูุชุตูุฉ**
- **Access Token ูุฌุจ ุฃู ูููู ุตุงูุญุงู**

---

## ๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุชุทุจูู ูุฐู ุงูุญูููุ ูุฌุจ ุฃู:
- โ ุชุธูุฑ ุงูุตูุญุงุช ุงููุฑุจูุทุฉ ูู `/connected-pages`
- โ ุชุนูู ุนูููุงุช ุงูุฅุฏุงุฑุฉ (ูุทุน ุงูุงุชุตุงูุ ุญุฐูุ ุฅุนุงุฏุฉ ุชูุนูู)
- โ ุชุชุญุฏุซ ุงูุจูุงูุงุช ููุฑุงู ุจุนุฏ ุฃู ุชุบููุฑ
- โ ุชุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ุงูุตุญูุญุฉ
