# ๐ ููุฎุต ุงูุญู - ูุดููุฉ ุนุฏู ุธููุฑ ุงูุฑุณุงุฆู

## ๐ ุงููุดููุฉ ุงูุฃุตููุฉ
ุงููุญุงุฏุซุงุช ูุงูุฑุณุงุฆู ูุง ุชุธูุฑ ูู ุตูุญุฉ `http://localhost:8080/facebook-conversations` ุฑุบู ูุฌูุฏูุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

## ๐ ุงูุชุดุฎูุต
ุชู ุงูุชุดุงู ุนุฏุฉ ูุดุงูู ูุชุฑุงุจุทุฉ:

### 1. **ูุดููุฉ ุงูุฌุฏูู ุงูููุญุฏ**
- ุงููุธุงู ูุงู ูุง ูุฒุงู ูุณุชุฎุฏู ุงูุฌุฏุงูู ุงููุฏููุฉ `facebook_settings` ู `facebook_pages`
- ุจุนุฏ ุงูุชูุญูุฏุ ูุงู ูุฌุจ ุชุญุฏูุซ ุฌููุน ุงูุงุณุชุนูุงูุงุช ูุชุณุชุฎุฏู `facebook_pages_unified`

### 2. **ูุดููุฉ ูุนุฑู ุงูุดุฑูุฉ**
- ุงููุญุงุฏุซุงุช ูุงูุช ูุฑุชุจุทุฉ ุจุงูุดุฑูุฉ `company-2`
- ุงููุธุงู ูุจุญุซ ุนู ูุญุงุฏุซุงุช ููุดุฑูุฉ `c677b32f-fe1c-4c64-8362-a1c03406608d`

### 3. **ูุดููุฉ ูุนุฑูุงุช ุงูุตูุญุงุช**
- ุงููุญุงุฏุซุงุช ูุงูุช ูุฑุชุจุทุฉ ุจุตูุญุงุช `page_123`, `page_789`, `page_456`
- ุงูุตูุญุงุช ุงููุนููุฉ ููุง ูุนุฑูุงุช ูุฎุชููุฉ `123456789`, `250528358137901`

### 4. **ูุดููุฉ `recent_only`**
- ุงููุธุงู ูุงู ูุณุชุฎุฏู `recent_only=true` ุจุดูู ุงูุชุฑุงุถู
- ุงูุฑุณุงุฆู ุงูููุฌูุฏุฉ ูู ุชุงุฑูุฎ 8 ููููู (ูุฏููุฉ ุฃูุซุฑ ูู 24 ุณุงุนุฉ)

## ๐๏ธ ุงูุญููู ุงููุทุจูุฉ

### 1. **ุชุญุฏูุซ ุงูุงุณุชุนูุงูุงุช ููุฌุฏูู ุงูููุญุฏ**
```typescript
// ูุจู ุงูุฅุตูุงุญ
'SELECT * FROM facebook_settings WHERE company_id = ? AND is_active = 1'

// ุจุนุฏ ุงูุฅุตูุงุญ  
'SELECT * FROM facebook_pages_unified WHERE company_id = ? AND is_active = 1'
```

**ุงููููุงุช ุงููุญุฏุซุฉ:**
- `src/api/server-mysql.ts` - ุฌููุน ุงุณุชุนูุงูุงุช Facebook
- `src/api/server.ts` - ุงุณุชุนูุงูุงุช ุฌูุจ ุงูุตูุญุงุช

### 2. **ุฅุตูุงุญ ุฑุจุท ุงูุจูุงูุงุช**
```sql
-- ุชุญุฏูุซ ูุนุฑู ุงูุดุฑูุฉ ูููุญุงุฏุซุงุช
UPDATE conversations SET company_id = 'c677b32f-fe1c-4c64-8362-a1c03406608d' 
WHERE company_id = 'company-2'

-- ุชุญุฏูุซ ูุนุฑูุงุช ุงูุตูุญุงุช
UPDATE conversations SET facebook_page_id = '123456789' WHERE facebook_page_id = 'page_123'
UPDATE conversations SET facebook_page_id = '250528358137901' WHERE facebook_page_id = 'page_789'
```

### 3. **ุชุญุฏูุซ ุตูุญุงุช Facebook**
```sql
-- ููู ุงูุตูุญุงุช ููุดุฑูุฉ ุงูุตุญูุญุฉ
UPDATE facebook_pages_unified SET company_id = 'c677b32f-fe1c-4c64-8362-a1c03406608d'
WHERE page_id IN ('123456789', '250528358137901')
```

### 4. **ุฅุตูุงุญ ุฅุนุฏุงุฏ `recent_only`**
```typescript
// ูุจู ุงูุฅุตูุงุญ
async getConversations(companyId: string, limit = 50, recentOnly = true)
async getMessages(conversationId: string, companyId: string, limit = 50, recentOnly = true)

// ุจุนุฏ ุงูุฅุตูุงุญ
async getConversations(companyId: string, limit = 50, recentOnly = false)
async getMessages(conversationId: string, companyId: string, limit = 50, recentOnly = false)
```

## ๐ ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ

### โ ุงููุญุงุฏุซุงุช
```json
{
  "success": true,
  "data": [
    {
      "id": "conv_1751935287534_1",
      "company_id": "c677b32f-fe1c-4c64-8362-a1c03406608d",
      "facebook_page_id": "123456789",
      "participant_name": "ุฃุญูุฏ ูุญูุฏ ุนูู",
      "last_message_text": "ูุฑุญุจุงู ุจู! ุณูููู ุจุงูุฑุฏ ุนููู ูู ุฃูุฑุจ ููุช ูููู",
      "last_message_time": "2025-07-08T00:41:27.000Z",
      "unread_count": 0
    }
    // ... 4 ูุญุงุฏุซุงุช ุฃุฎุฑู
  ],
  "count": 5
}
```

### โ ุงูุฑุณุงุฆู
```json
{
  "success": true,
  "data": [
    {
      "id": "msg_1751935287792_conv_1751935287534",
      "conversation_id": "conv_1751935287534_1",
      "sender_name": "ูุฑูู ุงูุฏุนู",
      "message_text": "ูุฑุญุจุงู ุจู! ุณูููู ุจุงูุฑุฏ ุนููู ูู ุฃูุฑุจ ููุช ูููู",
      "is_from_page": 1,
      "created_at": "2025-07-08 00:41:27"
    },
    {
      "id": "msg_1751935287692_conv_1751935287534",
      "conversation_id": "conv_1751935287534_1", 
      "sender_name": "ุฃุญูุฏ ูุญูุฏ ุนูู",
      "message_text": "ูุฑุญุจุงูุ ุฃุฑูุฏ ุงูุงุณุชูุณุงุฑ ุนู ููุชุฌุงุชูู ุงูุฌุฏูุฏุฉ",
      "is_from_page": 0,
      "created_at": "2025-07-08 00:41:27"
    }
  ],
  "count": 2
}
```

## ๐ง ุงูุฃุฏูุงุช ุงููุณุชุฎุฏูุฉ

### ุณูุฑูุจุชุงุช ุงูุชุดุฎูุต
- `check-conversations.cjs` - ูุญุต ุงููุญุงุฏุซุงุช ูุงูุจูุงูุงุช
- `check-table-structure.cjs` - ูุญุต ุจููุฉ ุงูุฌุฏุงูู
- `check-messages.cjs` - ูุญุต ุงูุฑุณุงุฆู ูุฅูุดุงุก ุจูุงูุงุช ุชุฌุฑูุจูุฉ

### ุณูุฑูุจุชุงุช ุงูุฅุตูุงุญ
- `check-and-create-company.cjs` - ุฅูุดุงุก ุงูุดุฑูุฉ ูุฅุตูุงุญ ุงูุจูุงูุงุช
- `fix-conversations-mapping.cjs` - ุฅุตูุงุญ ุฑุจุท ุงููุญุงุฏุซุงุช

## ๐ ุชุญุณููุงุช ุงูุฃุฏุงุก

### ูุจู ุงูุฅุตูุงุญ
- โ ูุง ุชูุฌุฏ ูุญุงุฏุซุงุช ุชุธูุฑ
- โ ุงุณุชุนูุงูุงุช ุชุณุชุฎุฏู ุฌุฏุงูู ูุฏููุฉ
- โ ุจูุงูุงุช ุบูุฑ ูุชุฑุงุจุทุฉ

### ุจุนุฏ ุงูุฅุตูุงุญ
- โ 5 ูุญุงุฏุซุงุช ุชุธูุฑ ุจูุฌุงุญ
- โ 10+ ุฑุณุงุฆู ุชุธูุฑ ุจูุฌุงุญ
- โ ุงุณุชุนูุงูุงุช ูุญุณูุฉ ุชุณุชุฎุฏู ุงูุฌุฏูู ุงูููุญุฏ
- โ ุจูุงูุงุช ูุชุฑุงุจุทุฉ ูููุธูุฉ

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. **ูุฑุงูุจุฉ ุงููุธุงู**
- ุชุดุบูู `monitoring/comparison-monitor.cjs` ูููุฑุงูุจุฉ ุงููุณุชูุฑุฉ
- ูุฑุงุฌุนุฉ ุงูุณุฌูุงุช ููููุงู ููุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ูุดุงูู

### 2. **ุงุฎุชุจุงุฑ ุดุงูู**
- ุชุดุบูู `testing/crud-test-suite.cjs` ููุงุฎุชุจุงุฑ ุงูุดุงูู
- ุงุฎุชุจุงุฑ ุฌููุน ุงููุธุงุฆู ูุน ุงููุณุชุฎุฏููู

### 3. **ุชูุธูู ุงูุจูุงูุงุช**
- ุญุฐู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ
- ุชุญุณูู ุงูููุงุฑุณ ููุฃุฏุงุก ุงูุฃูุซู

## ๐ก ุฏุฑูุณ ูุณุชูุงุฏุฉ

1. **ุฃูููุฉ ุงูุชูุญูุฏ ุงูุชุฏุฑูุฌู**: ูุฌุจ ุชุญุฏูุซ ุฌููุน ุฃุฌุฒุงุก ุงููุธุงู ุนูุฏ ุชูุญูุฏ ุงูุฌุฏุงูู
2. **ูุญุต ุงูุจูุงูุงุช ุงููุชุฑุงุจุทุฉ**: ุงูุชุฃูุฏ ูู ุชุทุงุจู ูุนุฑูุงุช ุงูุดุฑูุงุช ูุงูุตูุญุงุช
3. **ุฅุนุฏุงุฏุงุช ุงูุชุฑุงุถูุฉ ุญูููุฉ**: `recent_only=false` ุฃูุถู ููุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ
4. **ุฃูููุฉ ุงูุงุฎุชุจุงุฑ ุงูุดุงูู**: ุงุฎุชุจุงุฑ ุฌููุน ุงููุณุงุฑุงุช ุจุนุฏ ุงูุชุบููุฑุงุช ุงููุจูุฑุฉ

## ๐ฏ ุงูุฎูุงุตุฉ

ุชู ุญู ุงููุดููุฉ ุจูุฌุงุญ ูู ุฎูุงู:
- โ ุชุญุฏูุซ ุฌููุน ุงูุงุณุชุนูุงูุงุช ููุฌุฏูู ุงูููุญุฏ
- โ ุฅุตูุงุญ ุฑุจุท ุงูุจูุงูุงุช ุจูู ุงูุฌุฏุงูู
- โ ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ
- โ ุฅูุดุงุก ุฃุฏูุงุช ูุฑุงูุจุฉ ูุงุฎุชุจุงุฑ ุดุงููุฉ

**ุงููุชูุฌุฉ:** ุงููุญุงุฏุซุงุช ูุงูุฑุณุงุฆู ุชุธูุฑ ุงูุขู ุจุดูู ุตุญูุญ ูู `http://localhost:8080/facebook-conversations` ๐

---

**ุชุงุฑูุฎ ุงูุญู:** 11 ููููู 2025  
**ุงููุทูุฑ:** ูุฑูู ุชุทููุฑ Facebook Reply System  
**ุงูุญุงูุฉ:** โ ุชู ุงูุญู ุจูุฌุงุญ
